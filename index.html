<!DOCTYPE html>
<html>
    <head>
        <!-- META HTML -->
        <title>Spending Recap</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

        <!-- CSS -->
        <link rel="stylesheet" type="text/css" href="src/view/css/general.css">
        <link rel="stylesheet" type="text/css" href="src/view/css/foundation.min.css">
        <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">

        <!-- JS LIBS -->
		<script type="text/javascript" src="libs/jquery-1.10.2.min.js"></script>
        <!-- CONTROLLERS -->
       	

        
    </head>
    <body class="body">
        <div class="app row">
            <div class="row header">
            	<div class="title columns titleContainer">
            		
            	</div>
            </div>
            <div class="row content collapse">
                <!-- <div class="row">
                    <div class="large-12 button columns">
                        AMAZON - 29.5 USD - 10:05 AM
                    </div>
                </div> 
                <div class="row">
                    <div class="large-12 button columns">
                       WALMART - 22.9 USD - 1:25 PM
                    </div>
                </div> 
                <div class="row">
                    <div class="large-12 button columns">
                        FIVE GUYS BURGERS & FRIES - 15 USD - 6:00 PM
                    </div>
                </div>  -->
                <div class="row collapse order">
                    <div class="large-9 small-9 columns">
                        <span class="prefix">My Order</span>
                    </div>
                    <div class="large-1 small-1 columns">
                      <div class="postfix  btnEdit btn"><i class="icon-arrow-down"></i></div>
                    </div>
                    <div class="large-1 small-1 columns">
                      <div class="postfix  btnEdit btn"><i class="icon-wrench"></i></div>
                    </div> 
                    <div class="large-1 small-1 columns">
                      <div class="postfix  btnDelete btn"><i class="icon-trash"></i></div>
                    </div>                   
                </div>
            </div>
            <div class="row footer">
            	<div class="formContainer row">   
                </div>
                <div class="large expand btnNewOrder btn"><i class="icon-plus"></i></div>
            </div>
        </div>
        <script type="text/javascript">
        //order.js
            var Order = (function () {
                function Order(name, price = null) {
                    this.name = name;
                    this.price = price;
                }
                Order.prototype.getProp = function (prop) {
                    switch (prop) {
                        case 'name':
                            return this.name;
                            break;
                        case 'price':
                            return this.price;
                            break;
                    }
                };
                return Order;
            })();

            $(document).ready(function()
            {
                $("#inputForm").click(function (event) {
                  event.stopPropagation();
                });
               

                function getDate(){
                    var d = new Date();

                    var month = d.getMonth()+1;
                    var day = d.getDate();

                   /* var output = d.getFullYear() + '/' +
                        ((''+month).length<2 ? '0' : '') + month + '/' +
                        ((''+day).length<2 ? '0' : '') + day;*/

                    var output = ((''+day).length<2 ? '0' : '') + day + '/' +
                        ((''+month).length<2 ? '0' : '') + month + '/' + d.getFullYear();
                    return output;
                }
                var dateNow = getDate();
                
                $(".titleContainer").html(dateNow+" - Spending Recap");

                $(".btnDelete").click(function(){
                    console.log('del attempt');
                    var orderLine = this.parentNode.parentNode;
                    orderLine.remove();
                    
                    console.log('del done');
                });

                $(".btnNewOrder").click(function(){
                    if($(".btnNewOrder").html() == "Add"){
                        var oneOrder = new Order($("#right-label").val());
                        $(".content").append('<div class="row collapse"><div class="large-8 small-8 columns"><span class="prefix">'+oneOrder.getProp('name')+'</span></div><div class="large-2 small-2 columns"><div class="button postfix btnDelete"><i class="icon-trash"></i></div></div><div class="large-2 small-2 columns"><div class="postfix button btnEdit"><i class="icon-wrench"></i></div></div></div>'); 
                         $("html").click(function() {
                            $("#inputForm").hide();
                        });

                    }
                    else {
                        var form = "<form id='inputForm'><div class='large-12 columns'><input type='text' id='right-label' placeholder='Price'></div></form>";
                        $(".formContainer").empty().append(form);
                        $(".btnNewOrder").text("Add");
                    }
                    
                });
                
                //CoreController.start(myBundle);
            });
        </script>
    </body>
</html>